APP().define("io",function(){"use strict";function a(b){var c=Object.create(a.prototype,{xhr:{value:new XMLHttpRequest,configurable:!0,writebale:!0}});return Object.assign(c,b),c.onstart&&c.onstart(),c.setEventsListeners(),c.send(),c.xhr}function b(a,b){return function(){var c="xml"!==b?this.responseText:this.responseXML;try{c&&"json"===b&&(c=JSON.parse(c))}catch(d){c="error"}a.call(this,c,this)}}var c,d,e,f=Object.prototype.hasOwnProperty,g=Array.prototype.slice,h=["abort","error","load","loadend","loadstart","progress","readystatechange","timeout"];return c=function(){function a(a){this.ret=[],this.obj=a,this.prepare()}return a.prototype={prepareFromObject:function(a,b){var c=this;(Object.keys(a)||[]).forEach(function(d){return void 0===b?void c.prepare(a[d],d):void c.prepare(a[d],b+"["+d+"]")})},prepareFromArray:function(a,b){var c=this;a.forEach(function(a){c.prepare(a,b)})},prepare:function(a,b){switch(a=void 0!==a?a:this.obj,APP.typeOf(a)){case"object":this.prepareFromObject(a,b);break;case"array":this.prepareFromArray(a,b);break;default:this.ret.push(b+"="+encodeURIComponent(a))}}},function(b){var c;return b?(c=new a(b),c.ret.length?c.ret.join("&"):""):""}}(),a.prototype=Object.create({setEventsListeners:function(){var a=this;for(this.statusCode&&this.xhr.addEventListener("loadend",b(function(){a.statusCode[this.status]&&a.statusCode[this.status].apply(this,g.call(arguments))},a.dataType),!1),e=0,d=h.length;d>e;e+=1)(this.xhr.hasOwnProperty(h[e])||this["on"+h[e]])&&this.xhr.addEventListener(h[e],b(a["on"+h[e]],a.dataType),!1);this.onend&&this.xhr.addEventListener("loadend",this.onend,!1)},setHeaders:function(){var a;this.headers["X-Requested-With"]="XMLHttpRequest",/post/i.test(this.type)&&(this.headers.Method="POST "+this.url+" HTTP/1.1",this.headers["Content-type"]="application/x-www-form-urlencoded; charset=utf-8");for(a in this.headers)f.call(this.headers,a)&&this.xhr.setRequestHeader(a,this.headers[a])},send:function(){var a;a=this.data instanceof FormData?this.data:c(this.data),this.xhr.open(this.type,this.url,this.async||!0,this.username,this.password),this.setHeaders(),this.xhr.send(a)}}),APP.extend(a.prototype,{async:!0,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",context:null,data:null,headers:{},statusCode:null,type:"GET",url:"",username:void 0,password:void 0,timeout:0,onabort:null,onerror:null,onload:null,onloadend:null,onloadstart:null,onprogress:null,onreadystatechange:null,ontimeout:null,onstart:null,onend:null,withCredentials:!1}),a.get=function(b){var d=g.call(arguments,1),e=d.pop(),f=d.pop();return a({url:b,onload:e,data:c(f)})},a.post=function(b){var c=g.call(arguments,1),d=c.pop(),e=c.pop();return a({url:b,type:"POST",onload:d,data:e})},{xhr:a,get:a.get,post:a.post}}());