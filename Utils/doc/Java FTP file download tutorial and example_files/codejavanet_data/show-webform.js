APP.beta=!0,function(){"use strict";function a(b){return a.create(b)}function b(){return b.create()}function c(){return c.create()}var d,e=[],f=APP(),g=f.dom,h=Array.prototype,i=!1;a.assign({TPL:'<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><link rel="stylesheet" type="text/css" href="/stylesheets/core/pages/webFormV2/public/template_core.css"/><link rel="stylesheet" type="text/css" id ="template_css" href="{{CSS_URL}}"/></head><body><div>{{CONTENT}}</div></body></html>',create:function(b){var c=Object.assign(Object.create(a.prototype,{cssurl:{get:function(){return"/images/common/templates/webform/"+(this.template_id||"../apps")+"/"+(this.columns||this.app_name)+"/thp/style.css"}}}),b);return c.content?(f.publish("webform.customs.parse",c.content,function(b){var d=b;return"page"===c.type?(c.html=d,c.show(),d):(d=a.TPL.replace(/\{\{(.*?)\}\}/g,function(a,d){switch(d){case"CSS_URL":return c.cssurl;case"CONTENT":return b.replace(/contenteditable="(true|false)"/g,"")}return""}),void(c.html=d))},void 0,!0),c):c}}).implement({show:function(){return"page"===this.type?void(this.wrapper.innerHTML=this.html):(document.open(),document.writeln(this.html),void document.close())}}),b.assign({fields:function(){function a(a){this.ret=[],this.obj=a,this.prepare()}return a.prototype={typeOf:function(a,b){var c=Object.prototype.toString.call(a),d=/\[.*\s(.*)\]/gi.exec(c);return d&&d[1]&&(c=d[1]),b?b===c.toLowerCase():c.toLowerCase()},prepareFromObject:function(a,b){var c=this;(Object.keys(a)||[]).forEach(function(d){return void 0===b?void c.prepare(a[d],d):void c.prepare(a[d],b+"["+d+"]")})},prepareFromArray:function(a,b){var c=this;a.forEach(function(a){c.prepare(a,b)})},prepare:function(a,b){switch(a=void 0!==a?a:this.obj,this.typeOf(a)){case"object":this.prepareFromObject(a,b);break;case"array":this.prepareFromArray(a,b);break;default:this.ret.push('<input type="hidden" name="'+b+'" value="'+a+'">')}}},function(b){var c;return b?(c=new a(b),c.ret.length?(c.ret.push('<input type="hidden" name="webform[http_referer]" value="'+window.location.href+'">'),c.ret.join("")):""):""}}(),create:function(a){var c;if(!a||!a.form)throw new Error("No data");return c=Object.create(b.prototype),Object.assign(c,a),c.build(),c}}).implement({build:function(){var a=document.createElement("form");Object.assign(a,this.form),a.innerHTML=b.fields(this.values),document.body.appendChild(a),a.submit()}}),c.assign({create:function(){var a=Object.create(c.prototype,{uid:{get:function(){return window.location.href}}});return a}}).implement({init:function(a){d=a.http_referer||window.location.href},submit:function(a){b.create(a)},download:function(a){var b=this.linkelement;b.href=a.url,b.target="_blank",b.click()}}),APP([APP.files.js.templateBuilder],function(){function j(){throw new TypeError("Illegal constructor")}function k(){throw new TypeError("Illegal constructor")}function l(){throw new TypeError("Illegal constructor")}function m(){throw new TypeError("Illegal constructor")}function n(){throw new TypeError("Illegal constructor")}function o(){throw new TypeError("Illegal constructor")}function p(){throw new TypeError("Illegal constructor")}function q(){throw new TypeError("Illegal constructor")}function r(){throw new TypeError("Illegal constructor")}function s(){throw new TypeError("Illegal constructor")}var t=function(a,b){return void 0===b?a.textContent:void(a.textContent=b)};s.assign({create:function(a){var b=Object.create(s.prototype,{element:{value:a}});return b}}).inherits(r).implement({build:function(a){var b=this.element.firstElementChild,c=b.innerHTML.trim().length,d=""+a,e="0".repeat(c-d.length)+d;b.innerHTML=e}}),j.assign({constructors:{defaultType:l},registerConstructor:function(a,b){this.constructors[a]=b}}).inherits(APP.Observer,{app_name:{get:function(){return this.data.app_name}},columns:{get:function(){return this.data.columns}},template_id:{get:function(){return this.data.template_id}},html:{get:function(){return this.data.html}},customsData:{get:function(){return this.data.data||{}}},settings:{get:function(){return this.data.settings||{}}},postmsg:{get:function(){var a;if(global.parent!==global)return a=c.create(),Object.defineProperty(this,"postmsg",{value:a}),a},configurable:!0}}).implement({addStyleVendors:function(a){var b,c=g.cssVendorPrefix;switch(c){case"-moz-":b="::-moz-placeholder";break;case"-webkit-":b="::-webkit-input-placeholder";break;case"-ms-":b=":-ms-input-placeholder"}return a.replace(/\.like-placeholder/gm,b)},setCss:function(){var a=this.data,b=document.head;b.innerHTML=b.innerHTML+'<link rel="stylesheet" type="text/css" href="/images/common/templates/webform/'+(this.template_id||"../apps")+"/"+(this.columns||this.app_name)+'/style.css"/>'+this.addStyleVendors(a.css)},setHTML:function(a,b){var c=this;f.publish("webform.customs.parse",c.html,function(){var d,e=document.createElement("div"),f=this.customs,g=[],i=1;e.innerHTML=c.html.replace(/contenteditable="(true|false)"/g,""),h.slice.call(e.querySelectorAll('[data-editable="custom"]')).forEach(function(a){var b;g.push(a),a.innerHTML=a.innerHTML.replace(/\[\[([^:]+?)(\|(.*?))?\]\]/,function(a,c){return b=c,""}),b&&f.hasOwnProperty(b)&&f[b].template.insert(a)}),d=c.sortCustomsByTabIndex(g),d.forEach(function(a){h.forEach.call(a.querySelectorAll("[data-tab-index]"),function(a){a.tabIndex=i++})}),a.appendChild(e.childNodes[0]),"function"==typeof b&&b.call(this.customs)},c.customsData,!1)},sortCustomsByTabIndex:function(a){return a.sort(function(a,b){var c=a.style,d=b.style,e=c.top?parseInt(c.top):0,f=d.top?parseInt(d.top):0,g=c.height?parseInt(c.height):0,h=d.height?parseInt(d.height):0,i=c.left?parseInt(c.left):0,j=d.left?parseInt(d.left):0,k=e+g,l=f+h;return a.className.indexOf("submit")>-1?1:b.className.indexOf("submit")>-1?-1:e>=l?1:f>=k?-1:i-j}),a},getConstructorByType:function(a){var b=j.constructors;return b[a]||b.defaultType},fieldsControlPlugins:function(){var a=this,b=h.slice.call(this.form.querySelectorAll('[data-toolbox*="datepicker"], [data-toolbox*="timepicker"]'));0<b.length&&APP().require(["/javascripts/common/app/query.src-verified.async.js","/javascripts/core/js/tools/form/datetimepicker/extensions/date.js","/javascripts/core/js/tools/form/datetimepicker/helpers/vendor.js","/javascripts/core/js/tools/form/datetimepicker/helpers/stylesheet.js","/javascripts/core/js/tools/form/datetimepicker/classes/dom_event_action.js","/javascripts/core/js/tools/form/datetimepicker/classes/tpl_object_builder.js","/javascripts/core/js/tools/form/datetimepicker/classes/tpl.js","/javascripts/core/js/tools/form/datetimepicker/classes/calendar.js","/javascripts/core/js/tools/form/datetimepicker/classes/clock.js","/javascripts/core/js/tools/form/datetimepicker/classes/picker.js","4ccbcbf8e56917697fb28d921f52789f"],function(){f.datetimepicker.ready(),(h.slice.call(f.datetimepicker)||[]).forEach(function(b){b.on("dp:show:after",function(){a.send({call:"selecton"})}),b.on("dp:hide:after",function(){a.send({call:"selectoff"})})})})},fieldBuilder:function(a){var b=this;Object.keys(a).forEach(function(c){var d=a[c],e=b.getConstructorByType(d.type),f=Object.create(e.prototype,{data:{value:d},name:{value:c},webform:{value:b}});"email"===c&&(f.required=!0),f.build(),b.elements||(b.elements={}),h.push.call(b.elements,f),b.elements[c]=f})},staticBuilder:function(a){var b=this,c="9876543";(h.slice.call(a)||[]).forEach(function(a){var d,e=a.getAttribute("data-editable");if(b.data&&b.data.stats)switch(e){case"static-counter":d=s.create(a),void 0!==b.data&&void 0!==b.data.stats&&void 0!==b.data.stats.visitors&&(c=b.data.stats.visitors),d.build(c)}})},build:function(a){var b,c=document.querySelector(a),e=this;this.setCss(),b=Object.assign({appName:e.data.app_name,publish:"published"===e.data.settings.status,displayType:"embedded",displayPosition:"",displayDelay:"1",displayEffect:"none",displayInterval:90,displayBackground:"translate"},e.data.data&&e.data.data.__form__||{}),/embedded/.test(b.displayType)&&(b.displayEffect="none",b.displayPosition="",b.displayInterval=-1),Object.assign(e,b),this.setHTML(c,function(){var a,h=c.querySelector('[data-editable^="container"]'),j=/^form$/i.test(h.nodeName)?h:void 0,k=e.data.preview;Object.defineProperty(e,"form",{value:h}),j&&(g.hasClass(j.parentNode,"grwf2-wrapper")&&g.getSize("win").y<b.height&&g.addClass(j.parentNode,"wf2-long"),a=j.querySelector("[data-close]")||function(){if(!/embedded/.test(b.displayType)){var a,c=j.ownerDocument.createElement("div");return c.innerHTML='<div style="right:8px;top:8px;" data-close="x"><div style="font-size:12px;color:#cccccc;"></div></div>',a=c.children[0],j.parentNode.insertAdjacentElement("afterBegin",a),a}}(),e.fieldBuilder(this),e.fieldsControlPlugins(),j.action="/add_contact_webform_v2.html"+window.location.search,j.method="post",j.noValidate=!0,j.addEventListener("submit",function(a){return a.preventDefault(),a.stopPropagation(),e.nosubmit?!1:(function(a){a({type:"POST",url:"/add_contact_webform_v2.html"+window.location.search+"&type=ajax",data:function(){var a,b,c,f=j.elements,g=f.length,h={};for(c=0;g>c;c+=1)if(a=f[c].name,b=!1,a){switch(f[c].type){case"radio":case"checkbox":f[c].checked?b=f[c].value||"":h[a]||(h[a]="");break;default:b=f[c].value}!1!==b&&(h[a]?(Array.isArray(h[a])||(h[a]=[h[a]]),h[a].push(b)):h[a]=b)}return h["webform[http_referer]"]=d||window.location.href,e.submitFormData=h,h}(),onload:function(a){return a.error?void e.onerror(a):void e.onsubmit(a)}})}(f.io.xhr),!1)},!1)),a&&a.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation(),k||e.send({call:"close"})},!1),e.staticBuilder(h.querySelectorAll('[data-editable^="static"]')),(!e.data.showPage||/(fixed-bar|scroll-box)/i.test(b.displayType))&&b.displayPosition&&g.addClass(j.parentNode.parentNode,"display-position-"+b.displayPosition),"fixed-bar"===b.displayType&&(g.addClass(j.parentNode.parentNode,"fixed-bar-container"),g.addClass(j.ownerDocument.documentElement,"display-type-fixed-bar")),e.initIntervalCount=0,e.initIntervalID=function(){var c,d,f="embedded"===b.displayType,i=Math.max((g.css(h,"width")||"0").toInt(),h.offsetWidth,e.width),j=Math.max((g.css(h,"height")||"0").toInt(),h.offsetHeight,e.height),l=f&&!k?0:"calc(50% - "+Math.round(j/2)+"px)",m=f&&!k?0:"calc(50% - "+Math.round(i/2)+"px)";return 100<e.initIntervalCount?(clearInterval(e.initIntervalID),delete e.initIntervalID,void delete e.initIntervalCount):i?(d=g.css(h,"boxShadow"),c=g.css(h,"backgroundColor"),i=Math.max((g.css(h,"width")||"0").toInt(),h.offsetWidth,e.width),Object.assign(h.parentNode.style,{top:l,left:m,position:"absolute",overflow:"visible"}),Object.assign(h.style,{overflow:"hidden"}),e.send({call:"init",id:e.data.webforms_id,preview:k,closebtn:!!a,properties:{width:i,height:j},published:"published"===e.data.settings.status,display:b,style:{boxShadow:d,borderTopRightRadius:g.css(h,"borderTopRightRadius"),borderTopLeftRadius:g.css(h,"borderTopLeftRadius"),borderBottomRightRadius:g.css(h,"borderBottomRightRadius"),borderBottomLeftRadius:g.css(h,"borderBottomLeftRadius")}}),e.setWhenTheSameWindow(),e.initIntervalCount+=1,clearInterval(e.initIntervalID),delete e.initIntervalID,void delete e.initIntervalCount):void(e.initIntervalCount+=1)}.cyclic(500),window.addEventListener("message",function(a){var b=Math.max(h.offsetWidth,e.width),c=window.innerWidth;if(e.exec(a.data),i){var d=c/b;h.style[g.jsVendorPrefix+"Transform"]="scale("+d+")",h.style.transform="scale("+d+")",h.style.transformOrigin="0 0"}},!1)})},checkValidity:function(){return!0},reportValidity:function(){var a,b,c=this.elements,d=!0,e=c.length;for(b=0;e>b;b+=1)a=c[b].reportValidity(),a||(d=!1);return this.notify("reportValidity",d),d},submitStayOnPage:function(){var a,b=this,c=this.elements.__submit__,d=c.template.formElement,e=c.template.label,f=g.css(e,"color"),i='<svg height="75%" style="margin:auto auto;position:absolute;top:0;right:0;bottom:0;left:0;" viewBox="0 0 50 50" ><path fill="'+f+'" d="M0.1,24.4l4.3-4c5,2.4,8.2,4.3,13.8,8.3c10.6-12,17.6-18.1,30.6-26.2l1.4,3.2 c-10.7,9.4-18.6,19.8-29.9,40.1C13.3,37.6,8.6,32.4,0.1,24.4z"/></svg>',j=e.innerHTML,k=c.data.data,l=this.postmsg&&this.postmsg.uid;return k&&k.url?(e.innerHTML="Download",a=function(b){b.stopPropagation(),b.preventDefault(),parent.postMessage({call:"download",url:k.url,uid:l},"*"),d.disabled=!0,setTimeout(function(){d.form.reset(),e.innerHTML=j,h.slice.call(d.form.elements).forEach(function(a){a.focus(),a.blur()}),d.removeEventListener("click",a,!1),d.disabled=!1},1e3)},void d.addEventListener("click",a,!1)):(d.disabled=!0,e.innerHTML=i,void setTimeout(function(){d.form.reset(),e.innerHTML=j,b.send({call:"setSentCookie"}),h.slice.call(d.form.elements).forEach(function(a){a.focus(),a.blur()}),"embedded"!==b.displayType&&b.send({call:"close"}),d.disabled=!1},2500))},reloadToUrl:function(a){this.send({call:"reload",url:a})},onsubmit:function(){var a=this,c=this.settings.thankyou_type;switch(c){case"stay_on_page":this.submitStayOnPage();break;default:if(!this.postmsg){b.create({form:{action:a.form.action,method:a.form.method,target:a.form.target||"_top"},values:a.submitFormData});break}this.send({call:"submit",form:{action:a.form.action,method:a.form.method,target:a.form.target||"_top"},values:a.submitFormData})}},onerror:function(a){var b=this,c=a.error;APP.typeOf(c,"string")||(Object.keys(a.error)||[]).forEach(function(c){b.elements[c]&&b.elements[c].setErrorMessage(a.error[c])})},exec:function(a){var b=this.postmsg,c=a.call;c&&b&&b[c]&&(delete a.call,b[c](a))},send:function(a){var b=window.parent;a&&(a.uid||(a.uid=this.postmsg&&this.postmsg.uid||window.location.href),b.postMessage(a,"*"))},setWhenTheSameWindow:function(){var a,b=this,c="wf2-";if(window===window.top){if(a=document.getElementById("webform_preview"),i||(a.style.top="calc(50% - "+Math.round(this.height/2)+"px)",a.style.left="calc(50% - "+Math.round(this.width/2)+"px)"),"embedded"===this.displayType)return void(a.style.opacity=1);g.addClass(a,c+this.displayType+" "+c+this.displayEffect),a.addEventListener("transitionend",function(){"shake-box"===b.displayType&&g.addClass(a,"wf2-shake-box-animated"),g.addClass(a,"wf2-loaded")},!1),"none"===this.displayEffect&&g.addClass(a,"wf2-loaded"),g.addClass.delay(500,this,[a,"wf2-animated"])}}}),k.inherits(APP.Observer,{template:{get:function(){return this.data.template}},required:{get:function(){return(this.template.placeholderElement||this.template.formElement).getAttribute("aria-required")},set:function(a){(this.template.placeholderElement||this.template.formElement).setAttribute("aria-required",/true/i.test(a))}},value:{get:function(){return(this.template.placeholderElement||this.template.formElement).value},enumerable:!0},validationMessage:{get:function(){var a=this.template.elements.errorMessage.innerHTML;return a.trim()?(Object.defineProperty(this,"validationMessage",{value:a}),this.template.elements.errorMessage.innerHTML="",a):""},enumerable:!0,configurable:!0},willValidate:{get:function(){return(this.template.placeholderElement||this.template.formElement).willValidate},enumerable:!0},validity:{get:function(){return(this.template.placeholderElement||this.template.formElement).validity},enumerable:!0},type:{get:function(){return(this.template.placeholderElement||this.template.formElement).getAttribute("type")}},disabled:{get:function(){return this.data.disabled||(this.template.placeholderElement||this.template.formElement).disabled},set:function(a){(this.template.placeholderElement||this.template.formElement).disabled=/^(true)$/i.test(a)},enumerable:!0}}).implement({setCustomValidity:function(a){this.validationMessage=a},setErrorMessage:function(a){var b,c=this.template.elements,d=g.getSize("win"),e=this.webform.form.getBoundingClientRect(),f=c.box.getBoundingClientRect(),h=d.y,i=4,j=f.height,k=0;if(a=this.validationMessage||a,c.errorElement){if(this.webform.noframe||(h=Math.min(h,this.webform.height)),g.removeClass(c.errorElement,"error-in-field"),c.errorElement.style.left="-1000px",c.errorElement.hidden=!1,b=c.errorElement.getBoundingClientRect(),!a)return void this.unsetErrorMessage();h<f.bottom-e.top+b.height&&(j=f.height-b.height-i,g.addClass(c.errorElement,"error-in-field")),g.removeClass(c.errorElement,"tooltip-right"),"fixed-bar"===this.webform.displayType&&(k=f.width,j=(f.height-b.height)/2,g.addClass(c.errorElement,"tooltip-right")),0>k&&(k=5),0>j&&(j=5),c.errorMessage.innerHTML=a,Object.assign(c.errorElement.style,{top:j+"px",left:k+"px"})}},unsetErrorMessage:function(){var a=this.template.elements;a.errorElement&&(a.errorMessage.innerHTML="",a.errorElement.hidden=!0)},checkValidity:function(){return!0},reportValidity:function(){var a=this.checkValidity();return a?this.unsetErrorMessage():this.setErrorMessage(),a},attachValidationEvents:function(){var a=this;this.template.placeholderElement&&(g.on(this.template.placeholderElement,{focus:function(){a.unsetErrorMessage()},blur:function(){a.reportValidity()}}),g.on(this.template.errorElement,"click",function(){a.template.placeholderElement.focus()}))},attachEvents:function(){this.attachValidationEvents()},build:function(){var a=this;!function(){var b,c=a.template.placeholderElement||a.template.formElement;c&&(b=c.getAttribute("aria-required")||a.data.required,c.removeAttribute("required"),b&&c.setAttribute("aria-required",!0))}(),this.attachEvents()}}),l.inherits(k.prototype),m.inherits(k.prototype).implement({checkValidity:function(){var a=Number(this.data.data.minLength)||0;return k.prototype.checkValidity.call(this)&&this.value.length>=a}}),j.registerConstructor("text",m),n.assign({setMaxHeight:function(a){var b=g.getSize("win").y,c=a.getBoundingClientRect(),d=a.children||[],e=c.top,f=0;if(!(c.bottom<b)){for(var h=0,i=d.length;i>h;h+=1)e+=d[h].offsetHeight,e>=b||(f+=d[h].offsetHeight);a.style.minHeight=d[0].offsetHeight+"px",a.style.height=f+"px"}}}).inherits(k.prototype,{openingElement:{get:function(){return this.template.formElementBox}},value:{get:function(){var a=this.template.elements.options,b="";return Object.keys(a).forEach(function(c){var d=a[c],e=d.input;e.checked&&(b=e.value)}),b}}}).implement({open:function(){var a=this.template.wrapper.parentNode,b=this.webform.form,c=b.parentNode;g.addClass(this.openingElement,"open"),this.unsetErrorMessage(),this.nextSibling=a.nextElementSibling,c.insertAdjacentElement("beforeEnd",a),this.webform.send({call:"selecton"})},close:function(a){var b=this.template.wrapper.parentNode,c=this.nextSibling,d=this.webform.form;g.removeClass(this.openingElement,"open"),c?c.parentNode.insertBefore(b,c):d.appendChild(b),(void 0===a||a)&&this.checkValidity(),this.webform.send({call:"selectoff"})},choose:function(a){var b=a.text,c=this.template.elements.placeholderElement;c.value=t(b).trim(),this.close()},attachListEvents:function(){var a=this,b=this.template,c=b.elements.options;Object.keys(c).forEach(function(b){var d=c[b];g.on(d.input,{click:function(b){b.stopPropagation(),a.choose(d,c)}})})},attachValidationEvents:function(){},attachEvents:function(){var a=this,b=this.template,c=b.wrapper.parentNode;g.on(b.formElementBox,{click:function(b){b.stopPropagation(),a.open()}}),g.on(b.formElementListBackdrop,{click:function(b){b.stopPropagation(),a.close()}}),g.on(window,{resize:function(a){n.setMaxHeight(c.querySelector("ul.list"))}}),this.attachListEvents(),k.prototype.attachEvents.call(this)}}),j.registerConstructor("single_select",n),o.inherits(n.prototype,{value:{get:function(){var a=this.template.elements.options,b=[];return Object.keys(a).forEach(function(c){var d=a[c],e=d.input,f=e.value;e.checked&&f&&b.push(f)}),b}}}).implement({choose:function(a,b){var c=[],d=this.template.elements.placeholderElement,e=b[""],f=!0;a===e?Object.keys(b).forEach(a.input.checked?function(a){var d=b[a],f=d.text;d!==e&&(d.input.checked=!0,c.push(t(f)))}:function(a){var c=b[a];c.input.checked=!1}):(Object.keys(b).forEach(function(a){var d=b[a],g=d.text;d!==e&&d.input.checked?c.push(t(g)):d!==e&&(f=!1)}),e.input.checked=f),d.value=c.join(", ").trim()}}),j.registerConstructor("multi_select",o),p.inherits(n.prototype,{prefixElement:{get:function(){return this.template.elements.prefixElement}},placeholderElement:{get:function(){return this.template.placeholderElement}},phoneNumberElement:{get:function(){return this.template.phoneNumberElement}},format:{get:function(){return""},set:function(a){Object.defineProperty(this,"format",{value:a,writable:!0})},configurable:!0},prefix:{get:function(){return""},set:function(a){Object.defineProperty(this,"prefix",{value:a,writable:!0})},configurable:!0},value:{get:function(){return this.phoneNumberElement.value}}}).implement({checkValidity:function(){return!0},attachValidationEvents:function(){var a=this;g.on(this.placeholderElement,{focus:function(){a.unsetErrorMessage()},blur:function(){a.reportValidity()}})},clear:function(a){var b={a:2,b:2,c:2,d:3,e:3,f:3,g:4,h:4,i:4,j:5,k:5,l:5,m:6,n:6,o:6,p:7,q:7,r:7,s:7,t:8,u:8,v:8,w:9,x:9,y:9,z:9};return String(a).replace(/((\d)|(.))/g,function(a,c,d,e){return d?d:e?/[a-zA-Z]/.test(e)?(e=e.toLowerCase(),b[e]||""):"":void 0})},formatNumber:function(a,b){var c=!1;return b?(a=String(a||"").split(""),b.replace(/./g,function(b){var d="";return a.length?(d=b,"X"===b&&(d=a.shift(),a.length||(c=!0)),d):c&&"X"!==b?b:(c=!1,"")})):a},getFormattedNumber:function(){return this.formatNumber(this.clear(this.placeholderElement.value),this.format)},setNumber:function(a){var b=this.clear(a);this.phoneNumberElement.value=b?this.prefix+String(b):""},attachEvents:function(){var a,b=this;n.prototype.attachEvents.call(this),g.on(this.placeholderElement,{click:function(a){a.stopPropagation()},keydown:function(){a=this.selectionStart},input:function(){var c,d=this.selectionStart,e=this.value;if(this.value=c=b.getFormattedNumber(),b.setNumber(c),d&&e.slice(0,d)!==c.slice(0,d)&&(d+=1),d>a){for(;c[d]&&!/[0-9]/.test(c[d]);)d+=1;this.selectionStart=this.selectionEnd=d}else a>d&&(this.selectionStart=this.selectionEnd=d)}})},setPrefix:function(a){this.prefix=a,t(this.prefixElement,a)},setFormat:function(a){this.format=a,this.placeholderElement.value=this.getFormattedNumber()},choose:function(a,b){var c=a.input,d="+"+c.getAttribute("data-code");this.setPrefix(d),this.prefixElement.setAttribute("data-flag",c.value),this.setFormat(c.getAttribute("data-format")||""),this.close(b),b&&this.placeholderElement.focus()},build:function(){var a,b=this.template.elements.options,c=this.prefixElement.getAttribute("data-flag"),d=this,e=!1;Object.keys(b).forEach(function(f){var g=b[f],h=g.input;a=a||g,h&&h.value===c&&(h.checked=!0,d.choose(g,!1),e=!0)}),!e&&a&&this.choose(a,!1),n.prototype.build.call(this)}}),j.registerConstructor("phone",p),q.inherits(k.prototype,{}).implement({choose:function(a,b){var c,d=b[""];a===d?(c=a.input.checked,Object.keys(b).forEach(function(a){var d=b[a];d.input.checked=c})):d.input.checked=Object.keys(b).every(function(a){var c=b[a];return c===d||c.input.checked})},attachEvents:function(){var a=this,b=this.template,c=b.elements.options;Object.keys(c).forEach(function(b){var d=c[b];g.on(d.input,{click:function(b){b.stopPropagation(),a.choose(d,c)}})}),k.prototype.attachEvents.call(this)}}),j.registerConstructor("checkbox",q),f.subscribe("webform.build",function(b,c,d){function e(c,d){g=Object.create(j.prototype,{data:{value:c},nosubmit:{value:d||!1}}),g.build(b),g.thankyoupage=a.create({template_id:c.template_id,webforms_id:c.webforms_id,columns:c.columns,app_name:c.app_name,content:c.settings.thankyou_content,style:c.settings.thankyou_css,noframe:window===window.top})}var g,h=!1,k=!1;!function(){var a;try{if(window.top!==window&&window.top.localStorage.getItem("webform.preview")&&(a=JSON.parse(window.top.localStorage.getItem("webform.preview")),a.preview=!0,h=!0,f.io.post("/ajax_webform_creator.html?action=get_selected_customs",{data:JSON.stringify({name:function(){var b=a.data,c=[];return Object.keys(b).forEach(function(a){/^__.*__$/.test(a)||c.push(a)}),c}()})},function(b){var c=b.table;c&&(f.publish("webform.customs.register",c.predefined_custom_fields),f.publish("webform.customs.register",c.user_custom_fields)),e(a,!0)})),window===window.top&&!i){(document.head||document.querySelector("head")).insertAdjacentHTML("beforeEnd",'<link type="text/css" rel="stylesheet" href="/stylesheets/core/pages/webFormV2/public/gr_wf_v2.css"></link><style>div.grwf2-wrapper.wf2-embedded { position: fixed !important }div.wf2-long { position: absolute !important; top: 5px !important; }</style>');var b=document.getElementById("webform_preview");b.className="grwf2-wrapper",k=!0}}catch(c){localStorage.removeItem("webform.preview")}}(),h||(d&&f.publish("webform.customs.register",d),c.showPage=k,e(c))}),e&&(e.forEach(function(a){f.publish("webform.build",a[0].selector,a[0],a[1])}),e=!1)}),f.subscribe("webform.registerBuild",function(b,c,d){var h,j;return i=d||!1,!0===c.thankYouPage?((document.head||document.querySelector("head")).insertAdjacentHTML("beforeEnd","<style>#webform_preview {position: absolute;top: 50% !important;left: 50% !important;"+g.cssVendorPrefix+"transform: translate(-50%, -50%);transform: translate(-50%, -50%);}</style>"),a.create({type:"page",wrapper:c.wrapper,content:function(a){return(a.content?a.content.firstChild:a.firstElementChild).outerHTML.trimToSpace()}(document.getElementById("thpcontent"))})):(h=c.webform_data,j=c.customs_data,Object.assign(h,h.variants[0]),delete h.variants,h.selector=b,void(e?e.push([h,j]):f.publish("webform.build",b,h,j)))}),f.domready(function(){var a=document.getElementById("Debug");a&&(a.hidden=!0)})}();