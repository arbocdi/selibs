function log(){"use strict";var a=global.console;a&&(a.log.apply?a.log.apply(a,arguments):a.log(Array.prototype.join.call(arguments,", ")))}if(void 0===global)var global=this;!function(obj,fn,arr){"use strict";function assign(a){var b=slice.call(arguments,1);try{b.forEach(function(b){Object.keys(b||{}).forEach(function(c){a[c]=b[c]},a)})}catch(c){console.error(c)}return a}var hasOwn=obj.hasOwnProperty,toString=obj.toString,slice=arr.slice,define;fn.toString=function(){return["function ",this.name,"() {\n	[code]\n}"].join("")},fn.setter=function(){var a=this;return function(){var b=this,c=Array.prototype.slice.call(arguments),d=c[0];return d?"string"==typeof d?(a.apply(this,c),this):((Object.keys(Object(d))||[]).forEach(function(e){c.slice(2),c.splice(0,0,e,d[e]),a.apply(b,c)}),this):this}},fn.getter=function(){var a=this;return function(b){var c,d,e;if("string"!=typeof b?c=b:arguments.length>1&&(c=arguments),c)for(d={},e=0;e<c.length;e+=1)d[c[e]]=a.call(this,c[e]);else d=a.call(this,b);return d}},fn.inherits=function(a){var b=slice.call(arguments,1)[0]||{},c=this,d=a,e=this.prototype;return b.constructor={value:c},a&&Object!==a.constructor?("function"==typeof a?a=a.prototype:d=a.constructor,b.uber={value:d.prototype,configurable:!0,writable:!0},this.prototype=Object.create(a,b),Object.assign(c.prototype,e),this):(b.uber={value:Object.prototype,configurable:!0,writable:!0},Object.defineProperties(this.prototype,b),this)},define=function(a,b){var c;if(hasOwn.call(this,a)||void 0===b)return this;c="[object Object]"===toString.call(b)&&void 0!==b.value;try{Object.defineProperty(this,a,c?b:{value:b,configurable:!0,enumerable:!0,writable:!0})}catch(d){this[a]=c?b.value:b}return this}.setter(),define.call(fn,{assign:function(a,b){define.call(this,a,b)}.setter(),implement:function(a,b){define.call(this.prototype,a,b)}.setter()}),fn.augment=fn.assign,Object.augment({is:function(a,b){return 0===a&&0===b?1/a===1/b:a!==a?b!==b:a===b},mixin:function(a,b){var c;try{Object.keys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))})}catch(d){for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}return a},create:function(a){function b(){}return b.prototype=a,a&&(b.prototype.constructor=b),new b},keys:function(a){var b,c=[];for(b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.push(b);return c},setPrototypeOf:function(a,b){try{a.__proto__=b}catch(c){if("object"!=typeof a&&!/^(object|function)$/i.test(typeof b))throw new TypeError("Expected both the arguments to be objects.");var d=function(a){var b,c,d=Object.getOwnPropertyNames(a),e=d.length;for(c=0;e>c;c+=1)b=d[c],this[b]=a[b]};return d.prototype=b,new d(a)}return a}}),hasOwn.call(Object,"assign")||Object.defineProperty(Object,"assign",{value:function(a){var b,c;try{if(void 0===a||null===a)throw new TypeError("Cannot convert first argument to object");b=Object(a),c=slice.call(arguments,1),c.forEach(function(a){var c;void 0!==a&&null!==a&&(c=Object.keys(Object(a)),c.forEach(function(c){var d=Object.getOwnPropertyDescriptor(a,c);void 0!==d&&d.enumerable&&(b[c]=a[c])}))})}catch(d){assign.apply(Object,slice.call(arguments))}return b}}),Function.implement({bind:function(a){var b=this,c=slice.call(arguments,1);return function(){return b.apply(a,c.concat(slice.call(arguments)))}},memoize:function(){var a=this,b={};return void 0===JSON?a:function(){var c=Array.prototype.slice.call(arguments),d=JSON.stringify(c);return b[d]||(b[d]=a.apply(a,c)),b[d]}},pass:function(a,b){var c=this;return a=a?slice.call(a):[],function(){return c.apply(b||global,a||arguments)}},delay:function(a,b,c){return setTimeout(this.pass(c?c:[],b),a)},cyclic:function(a,b,c){return setInterval(this.pass(c?c:[],b),a)},getName:function(){var a=this.toString().match(/^function\s(\w+)/);return a?a[1]:"anonymous"},require:function(a,b,c){return APP.require(a,this.pass(c||[],b))}}),String.implement({trim:function(){return this.replace(/(^[\s\xA0]+|[\s\xA0]+$)/g,"")},contains:function(){return-1!==String.prototype.indexOf.apply(this,arguments)},includes:function(a){var b,c,d,e=Object(this),f=Number.parseInt(e.length)||0;if(0===f)return!1;for(b=Number.parseInt(arguments[1])||0,b>=0?c=b:(c=f+b,0>c&&(c=0));f>c;){if(d=e[c],a===d||a!==a&&d!==d)return!0;c+=1}return!1},endsWith:function(a,b){b=b||this.length,b-=a.length;var c=this.lastIndexOf(a);return-1!==c&&c===b},startsWith:function(a,b){return b=b||0,this.indexOf(a,b)===b},repeat:function(a){return new Array(a>=0?Number.parseInt(a,10)+1:-1).join(this)},trimToSpace:function(a){return this.trim().replace(/(\s+)/gm,void 0!==a?a:" ")},toCamelCase:function(){return String(this).replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})},toDash:function(){return this.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})},ucfirst:function(){var a=this.charAt(0).toUpperCase();return a+this.substr(1)},test:function(a){return a.test(this)},toInt:function(a){return parseInt(this,a||10)},toFloat:function(){return parseFloat(this)},stripScripts:function(a){return this.replace(/(<\s*script[^>]*>[\s\S]*?<\s*\/\s*script[^>]*>|<\s*(\/\s*)?script[^>]*>)/gim,a||"")},htmlEncode:function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;"};return this.replace(new RegExp(Object.keys(a).join("|"),"mg"),function(b){return a[b]})}}),Array.assign({isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)||a instanceof Array},of:function(){return slice.call(arguments)},from:function(a,b,c){return Object(a).length?arr.map.call(a,"function"==typeof b?b:function(a){return a},c):[]}}),Array.implement({contains:{value:function(a){return-1<arr.indexOf.call(this,a)},writable:!0,enumerable:!1,configurable:!0},empty:{value:function(){return this.length=0,this},writable:!0,enumerable:!1,configurable:!0}}),Number.assign({sign:function(a){var b=+a;return 0===b?b:isNaN(b)?b:0>b?-1:1},isInteger:function(a){return"number"==typeof a&&Number.isFinite(a)&&a>-9007199254740992&&9007199254740992>a&&Math.floor(a)===a},parseInt:global.parseInt,parseFloat:global.parseFloat,isNaN:global.isNaN,isFinite:global.isFinite}),Number.implement({limit:function(a,b){return Math.min(b,Math.max(a,this))}}),Date.augment({now:function(){return+new Date}}),define.call(JSON,{evalToObject:function(str){try{return str=/^[\{|\[].*[\]\}]/.test(str)?"("+str+")":"({"+str+"})",eval(str)}catch(ex){return""}},splitToParse:function(a,b){var c,d,e,f,g={};if(!a)return null;for(c=a.split(b||","),f=0,e=c.length;e>f;f+=1)d=c[f].split(":"),d[0]&&(g[d[0].trim()]=(d.slice(1).join(":")||"").trim());return g}}),function(){function a(a,b){var c={identity:b},d=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(f){return f!==b||this!==a?d.apply(this,e.call(arguments)):c},configurable:!0}),c}function b(){var b={};return function(c){var d=c.valueOf(b);return void 0!==d&&d!==c&&d.identity===b?d:a(c,b)}}function c(a){if(a!==Object(a))throw new TypeError("value is not a non-null object");return a}function d(){var a=b();return{has:function(b){return"value"in a(b)},get:function(b,d){var e=a(c(b));return e.hasOwnProperty("value")?e.value:d},set:function(b,d){a(c(b)).value=d},"delete":function(b){return delete a(c(b)).value}}}var e=Array.prototype.slice;global.WeakMap||Object.defineProperties(global,{WeakMap:{value:d}})}(),function(){function a(){return this instanceof a?void(c.has(this)||c.set(this,{keys:[],values:[]})):new a}function b(){var a,d=[];return this instanceof b?(c.set(this,[]),a=Array.prototype.slice.call(arguments),a.length&&d.push.apply(d,a),void c.set(this,d)):new b}var c=new WeakMap;Object.defineProperties(a.prototype,{size:{get:function(){return c.get(this).keys.length},configurable:!0},clear:{value:function(){var a=c.get(this);a.keys.length=0,a.values.length=0},configurable:!0,enumerable:!1,writable:!0},"delete":{value:function(a){var b=c.get(this),d=b.keys.indexOf(a);return-1===d?!1:(b.keys.splice(d,1),b.values.splice(d,1),!0)},configurable:!0,enumerable:!1,writable:!0},entries:{value:function(){},configurable:!0,enumerable:!1,writable:!0},forEach:{value:function(a,b){var d,e,f=c.get(this),g=this.size;for(e=0;g>e;e+=1)if(f.keys[e]&&f.values[e]&&(d=a.call(b||this,f.values[e],f.keys[e]),!1===d))throw new TypeError},configurable:!0,enumerable:!1,writable:!0},get:{value:function(a){var b=c.get(this),d=b.keys.indexOf(a);return-1!==d?b.values[d]:void 0},configurable:!0,enumerable:!1,writable:!0},has:{value:function(a){var b=c.get(this);return b&&b.keys&&-1!==b.keys.indexOf(a)},configurable:!0,enumerable:!1,writable:!0},iterator:{value:function(){},configurable:!0,enumerable:!1,writable:!0},keys:{value:function(){},configurable:!0,enumerable:!1,writable:!0},set:{value:function(a,b){var d,e=c.get(this);d=e.keys.indexOf(a),-1===d?(e.keys.push(a),e.values.push(b)):e.values[d]=b},configurable:!0,enumerable:!1,writable:!0}}),Object.defineProperties(b.prototype,{size:{get:function(){return c.get(this).length}},add:{value:function(a){var b=c.get(this),d=b.indexOf(a);-1===d?b.push(a):b[d]=a}},clear:{value:function(){c.get(this).length=0}},"delete":{value:function(a){var b=c.get(this),d=b.indexOf(a);return-1===d?!1:(b.splice(d,1),!0)}},entries:{value:function(){}},forEach:{value:function(a,b){c.get(this).forEach(a,b)}},has:{value:function(a){return-1!==c.get(this).indexOf(a)}},iterator:{value:function(){}},keys:{value:function(){}},values:{value:function(){}}}),global.Map||Object.defineProperties(global,{Map:{value:a},Set:{value:b}})}(),/*!
     * Object.observe polyfill - v0.2.4
     * by Massimo Artizzu (MaxArt2501)
     *
     * https://github.com/MaxArt2501/object-observe
     *
     * Licensed under the MIT License
     * See LICENSE for details
     */
Object.observe||function(a,b,c,d){var e,f,g=["add","update","delete","reconfigure","setPrototype","preventExtensions"],h=b.prototype.indexOf?b.indexOf||function(a,c,d){return b.prototype.indexOf.call(a,c,d)}:function(a,b,c){for(var d=c||0;d<a.length;d+=1)if(a[d]===b)return d;return-1},i=function(){return new Map},j=a.getOwnPropertyNames,k=a.getPrototypeOf,l=a.defineProperties&&a.getOwnPropertyDescriptor,m=c.requestAnimationFrame||c.webkitRequestAnimationFrame||function(){var a=+new Date,b=a;return function(c){return setTimeout(function(){c((b=+new Date)-a)},17)}}(),n=function(a,b,c){var d=e.get(a);d?(p(d,a),t(a,d,b,c)):(d=o(a),t(a,d,b,c),1===e.size&&m(q))},o=function(b,c){var d,f=j(b),g=[],h=0;if(c={handlers:i(),frozen:a.isFrozen?a.isFrozen(b):!1,extensible:a.isExtensible?a.isExtensible(b):!0,proto:k&&k(b),properties:f,values:g,notifier:s(b,c)},l)for(d=c.descriptors=[];h<f.length;)d[h]=l(b,f[h]),g[h]=b[f[h++]];else for(;h<f.length;)g[h]=b[f[h++]];return e.set(b,c),c},p=function(){var b=l?function(a,b,c,d,e){var f=b.properties[c],g=a[f],h=b.values[c],i=b.descriptors[c];"value"in e&&(h===g?0===h&&1/h!==1/g:h===h||g===g)&&(u(a,b,{name:f,type:"update",object:a,oldValue:h},d),b.values[c]=g),!i.configurable||e.configurable&&e.writable===i.writable&&e.enumerable===i.enumerable&&e.get===i.get&&e.set===i.set||(u(a,b,{name:f,type:"reconfigure",object:a,oldValue:h},d),b.descriptors[c]=e)}:function(a,b,c,d){var e=b.properties[c],f=a[e],g=b.values[c];(g===f?0===g&&1/g!==1/f:g===g||f===f)&&(u(a,b,{name:e,type:"update",object:a,oldValue:g},d),b.values[c]=f)},c=l?function(a,c,d,e,f){for(var g,h=c.length;d&&h--;)null!==c[h]&&(g=l(a,c[h]),d--,g?b(a,e,h,f,g):(u(a,e,{name:c[h],type:"delete",object:a,oldValue:e.values[h]},f),e.properties.splice(h,1),e.values.splice(h,1),e.descriptors.splice(h,1)))}:function(a,b,c,d,e){for(var f=b.length;c&&f--;)null!==b[f]&&(u(a,d,{name:b[f],type:"delete",object:a,oldValue:d.values[f]},e),d.properties.splice(f,1),d.values.splice(f,1),c--)};return function(d,e,f){if(d.handlers.size&&!d.frozen){var g,i,m,n,o,p,q,r,s=d.values,t=d.descriptors,v=0;if(d.extensible)if(g=d.properties.slice(),i=g.length,m=j(e),t){for(;v<m.length;)o=m[v++],n=h(g,o),r=l(e,o),-1===n?(u(e,d,{name:o,type:"add",object:e},f),d.properties.push(o),s.push(e[o]),t.push(r)):(g[n]=null,i--,b(e,d,n,f,r));c(e,g,i,d,f),a.isExtensible(e)||(d.extensible=!1,u(e,d,{type:"preventExtensions",object:e},f),d.frozen=a.isFrozen(e))}else{for(;v<m.length;)o=m[v++],n=h(g,o),p=e[o],-1===n?(u(e,d,{name:o,type:"add",object:e},f),d.properties.push(o),s.push(p)):(g[n]=null,i--,b(e,d,n,f));c(e,g,i,d,f)}else if(!d.frozen){for(;v<g.length;v++)o=g[v],b(e,d,v,f,l(e,o));a.isFrozen(e)&&(d.frozen=!0)}k&&(q=k(e),q!==d.proto&&(u(e,d,{type:"setPrototype",name:"__proto__",object:e,oldValue:d.proto}),d.proto=q))}}}(),q=function(){e.size&&(e.forEach(p),f.forEach(r),m(q))},r=function(a,b){var c=a.changeRecords;c.length&&(a.changeRecords=[],b(c))},s=function(a,b){return arguments.length<2&&(b=e.get(a)),b&&b.notifier||{notify:function(b){var c=(b.type,e.get(a));if(c){var d,f={object:a};for(d in b)"object"!==d&&(f[d]=b[d]);u(a,c,f)}},performChange:function(b,c){if("string"!=typeof b)throw new TypeError("Invalid non-string changeType");if("function"!=typeof c)throw new TypeError("Cannot perform non-function");var f,g,h=e.get(a),i=arguments[2],j=i===d?c():c.call(i);if(h&&p(h,a,b),h&&j&&"object"==typeof j){g={object:a,type:b};for(f in j)"object"!==f&&"type"!==f&&(g[f]=j[f]);u(a,h,g)}}}},t=function(a,b,c,d){var e=f.get(c);e||f.set(c,e={observed:i(),changeRecords:[]}),e.observed.set(a,{acceptList:d.slice(),data:b}),b.handlers.set(c,e)},u=function(a,b,c,d){b.handlers.forEach(function(b){var e=b.observed.get(a).acceptList;("string"!=typeof d||-1===h(e,d))&&h(e,c.type)>-1&&b.changeRecords.push(c)})};e=i(),f=i(),a.observe=function(b,c,e){if(!b||"object"!=typeof b&&"function"!=typeof b)throw new TypeError("Object.observe cannot observe non-object");if("function"!=typeof c)throw new TypeError("Object.observe cannot deliver to non-function");if(a.isFrozen&&a.isFrozen(c))throw new TypeError("Object.observe cannot deliver to a frozen function object");if(e===d)e=g;else if(!e||"object"!=typeof e)throw new TypeError("Third argument to Object.observe must be an array of strings.");return n(b,c,e),b},a.unobserve=function(a,b){if(null===a||"object"!=typeof a&&"function"!=typeof a)throw new TypeError("Object.unobserve cannot unobserve non-object");if("function"!=typeof b)throw new TypeError("Object.unobserve cannot deliver to non-function");var c,d=f.get(b);return d&&(c=d.observed.get(a))&&(d.observed.forEach(function(a,b){p(a.data,b)}),m(function(){r(d,b)}),1===d.observed.size&&d.observed.has(a)?f["delete"](b):d.observed["delete"](a),1===c.data.handlers.size?e["delete"](a):c.data.handlers["delete"](b)),a},a.getNotifier=function(b){if(null===b||"object"!=typeof b&&"function"!=typeof b)throw new TypeError("Object.getNotifier cannot getNotifier non-object");return a.isFrozen&&a.isFrozen(b)?null:s(b)},a.deliverChangeRecords=function(a){if("function"!=typeof a)throw new TypeError("Object.deliverChangeRecords cannot deliver to non-function");var b=f.get(a);b&&(b.observed.forEach(function(a,b){p(a.data,b)}),r(b,a))}}(Object,Array,global)}(Object.prototype,Function.prototype,Array.prototype,String.prototype),global.APP=function a(){"use strict";var b,c=Array.prototype.slice.call(arguments),d=a.box,e=a.beta||"on"===global.localStorage.appbeta;if(3===c.length&&/string/.test(typeof c[1])&&Array.isArray(c[1])&&"function"==typeof c[2])return a.define.apply(a(),c);if(e&&1<c.length&&"function"==typeof c[c.length-1])return b=c.pop(),c.push(b.bind(d)),a.require.apply(a,c);switch(a.typeOf(c[0])){case"string":if(!c[0])break;if(/^[a-zA-Z0-9]{32}$/i.test(c[0])){a.require.apply(a,c);break}if(a.core.hasModule(c[0])){a.core.start.apply(a.core,c);break}return a.autoload.apply(a,c);case"function":if(e)return b=c[0],b.apply(d,c.slice(1));d.domready(c[0])}return d},APP.version="1.5 beta",function(a){"use strict";function b(){throw new TypeError("Illegal constructor")}function c(){throw new TypeError("Illegal constructor")}function d(){throw new TypeError("Illegal constructor")}var e,f,g=Object.prototype.hasOwnProperty,h=Object.prototype.toString,i=Array.prototype.slice,j={},k={},l=global.define,m=new WeakMap;f=function(){var a=Object.create(b.prototype),c=Object.create(b.prototype),d=[];return{subscribe:function(a,b){var e,f;{if(!a||!b||"object"!=typeof b)return"function"!=typeof b?this:(d&&!d.contains(b)&&(e=d.push(b),c.setArrayItem(a,e-1)),this);for(f in b)b.hasOwnProperty(f)&&this.subscribe(a+"."+f,b[f])}}.setter(),unsubscribe:function(a,b){var e,f,g;return b?(e=d.indexOf(b),g=c.getItem(a)||[],f=g.indexOf(e),void g.splice(f,1)):void c.removeItem(a)},publish:function(a){var b,e,f,g=i.call(arguments,1),h=[];for(a||log(c),b=c.getItem(a)||[],f=0,e=b.length;e>f;f+=1)try{h.push(d[b[f]].apply(this,g))}catch(j){log("Mediator publish error: "+j+" | channel name: "+a),console.error(j.stack)}return h.length>1?h:h[0]},setItem:function(b,c){return a.setItem(b,c)},getItem:function(b){return a.getItem(b)},removeItem:function(b){return a.removeItem(b)}}}(),b.implement({setItem:function(a,b){var c,d=this,e=a.split("."),f=e.pop(),g=e.length;for(c=0;g>c;c+=1)d=d[e[c]]=d[e[c]]||{};if((typeof d).test(/string|number|boolean|undefined/))throw new TypeError("Element is not object");d[f]=b}.setter(),getItem:function(a){var b,c,d,e=this;if(!a)return e;for(b=a.split("."),d=0,c=b.length;c>d;d+=1)if(e=e[b[d]],!e)return;return e},removeItem:function(a){var c=(a||"").split("."),d=c.pop(),e=b.prototype.getItem.call(this,c.join("."));return delete e[d]},hasItem:function(a){return!!b.prototype.getItem.call(this,a)},setArrayItem:function(a,b){var c,d=a.split("."),e=this,f=d.length;for(c=0;f>c;c+=1)e=e[d[c]]=e[d[c]]||[],e.contains(b)||e.push(b);return e},removeArrayItem:function(a,b){var c,d=a.split("."),e=this,f=[];d.every(function(a){var d=e;return e=e[a],e?(f.unshift({parent:d,part:a}),c=e.indexOf(b),-1!==c&&e.splice(c,1),!0):!1}),f.every(function(a){var b=a.parent,c=a.part;return 0===b[c].length?(delete b[c],!0):!1})}}),c.assign({prepare:function(a){var b;return m.has(a)?m.get(a):(b={handles:{}},Array.isArray(a.handles)&&(b.handles=a.handles),m.set(a,b),m.get(a))}}).implement({on:function(a,d){var e,f,g,h=APP.typeOf(d);{if(!a||!d||"object"!==h){if("function"!==h)throw new TypeError("Handle must be a function");if(!a)throw new TypeError("Event type can not be empty");return e=c.prepare(this).handles,f=Array.prototype.indexOf.call(e,d),-1===f&&(f=Array.prototype.push.call(e,d)-1),"string"===APP.typeOf(a)&&(a=a.split(/\s/)),a.forEach(function(a){b.prototype.setArrayItem.call(e,a,d)}),this}for(g in d)d.hasOwnProperty(g)&&this.on(a+"."+g,d[g])}}.setter(),off:function(a,d){var e=c.prepare(this),f=e.handles;if(f)return"number"==typeof d&&(d=f[d]),d?void b.prototype.removeArrayItem.call(f,a,d):void(b.prototype.getItem.call(f,a)||[]).forEach(function(b){this.off(a,b)}.bind(this))},notify:function(a){var d,e,f,g=i.call(arguments,1),h=c.prepare(this),j=h.handles,k=[];if(j){if(!a)return void log(j);for(d=b.prototype.getItem.call(j,a)||[],f=0,e=d.length;e>f;f+=1)try{k.push(d[f].apply(this.context||this,g))}catch(l){console.error("Observer "+(this.observername||"[noname]")+" notify error: "+l+" | type : "+a),console.error(l.stack)}return k.length>1?k:k[0]}}}),c.implement({trigger:c.prototype.notify,fire:c.prototype.notify}),d.prototype=Object.create(f,{constructor:{value:d}}),d.implement({plugin:d.implement.bind(d),define:function(a,c){b.prototype.setItem.call(this,a,c)}.setter()}),a.box=e=Object.create(d.prototype),e.plugin({namespace:{add:function(a,c,d){return b.prototype.setItem.call(d||this,a,c)},grab:function(a,c){return b.prototype.getItem.call(c||this,a)},remove:function(a,c){return b.prototype.removeItem.call(c||this,a)}}}),a.mixin=a.extend=function(){var a,b,c,d=i.call(arguments),e=d[0];for("boolean"==typeof e?e=d[1]:d=i.call(arguments,1),e=e||{},b=0,a=d.length;a>b;b+=1)for(c in d[b])Object.prototype.hasOwnProperty.call(d[b],c)&&(e[c]=d[b][c]);return e},a.assign({files:function(){var c=Object.create(Array.prototype);return c.prepareList=function(b){var c;for(c in b)g.call(b,c)&&(a.files.push(c),j[c]=b[c])},c.prepareLists=function(a){var b;for(b in a)g.call(a,b)&&c.prepareList(a[b])},c.getItem=function(b,c){var d;return b?(d=j[b]||k[b],d&&(c||a.files.nocompress)&&(d=d.replace(/(-rev.*)\.(js|css)$/i,function(a,b,c){return["js"===c?".src-verified.async":"src.async",c].join(".")})),d):Object.assign({},j,k)},c.setNamespace=function(c,d){var e;/^[a-zA-Z0-9]{32}$/i.test(c)&&(c=APP.files.getItem(c)),c&&(c=c.replace(/\?.*$/,""),e=/[^.]+$/i.exec(c)[0],e&&("string"!==a.typeOf(d)&&(d=c.replace(/(.*)\/([^/]+)$/,function(a,b,c){var d=b.split("/").pop();return/^(core|common)$/i.test(d)?d="":d+=".",d+c.replace(/(\.src|-rev)(.*)\.(js|css)/i,"")})),k[d]=c,b.prototype.setItem.call(a.files[e],d,c)))}.setter(),c.js={},c.css={},c.nocompress=Boolean(localStorage.filesNoCompress),c}(),typeOf:function(a,b){var c=h.call(a),d=/\[.*\s(.*)\]/gi.exec(c);return d&&d[1]&&(c=d[1]),b?b===c.toLowerCase():c.toLowerCase()},each:function(a,b,c){var d;if(c=c||a,Array.isArray(a))a.forEach(b,c);else for(d in a)if(g.call(a,d)&&b.call(c,d,a[d],a)===!1)break;return a},UID:function(a){var b,c,d=Date.now()+1,e=d.toString(36),f=e.length-1,g=[];for(c=0;36>c;c+=1)b=Math.floor(10*Math.random()),b>f&&(b=f-1),g.push(e.charAt(b));return g.slice(0,a||5).join("")},exports:{},namespace:function(a){return!0===a?b.prototype:Object.create(b.prototype,a)},observer:function(a){return!0===a?c.prototype:Object.create(c.prototype,a)},Namespace:b,Observer:c}),a.assign(f),APP.Module=function(){function b(a,b){this.name=a,this.builder=b}function c(){throw new TypeError("Illegal constructor")}var d=new WeakMap;return b.assign({create:function(){return Object.create(b.prototype)}}).inherits(APP.Namespace).implement({require:function(a){var b=this;APP().require(a,function(){b.register(a)})},register:function(a,b,c){return a?void this.setItem(a,{name:a,require:c,define:b,instance:null}):void Object.assign(global.exports,b.call(b,APP.box))}}),c.assign({create:function(){var a=Object.create(c.prototype);return d.set(a,b.create()),a}}).implement({define:function(){var a,c,e,f,g=i.call(arguments),h=d.get(this);if(0!==g.length)return h||(h=b.create(),d.set(this,h)),c=g.pop(),e=g.shift(),f=g.length&&g[0],Array.isArray(e)&&!f&&(f=e,e=""),a=h.register(e,c,f),f?void h.require(f):void h.register(e,c)},start:function(a,b,c){var f=d.get(this).getItem(a);if(c=c||APP.box,f){if(!f.instance)switch(APP.typeOf(f.define)){case"function":f.instance=f.define.call(c,c)}if(f.instance&&f.instance.init)return f.instance.init(b);e.subscribe(a,f.instance)}},startAll:function(a,b){var c=d.get(this).getItem(),e=Object.keys(c)||[],f=this.start.bind(this);e.forEach(function(c){f(c,a,b)})},stop:function(a){var b=d.get(this).getItem(a);b&&b.instance&&b.instance.destroy&&(b.instance.destroy(),b.instance=null)},stopAll:function(){var a=d.get(this).getItem(),b=Object.keys(a)||[];b.forEach(this.stop.bind(this))},getSandbox:function(){return APP.box},applyMethod:function(b,c,e){var f,g=d.get(this).getItem(b);return g.instance||a.core.start(b),f=g.instance[c],f?f.apply(g.instance,e):void console.warn("[APP.Module.applyMethod] modul "+g.name+" nie ma metody "+c)},hasModule:function(a){return d.get(this).hasItem(a)}}),APP.core=c.create(),APP.prototype.define=APP.core.define.bind(APP.prototype),c}(),a.assign({sandbox:function(){return{plugin:function(a,b){e.define(a,b())}}}(),autoload:function(){var a=i.call(arguments),b=APP.files&&APP.files.js,c=a.shift(),d=c.split(":"),e=d.pop().split("."),f=e.shift();d=d.join(""),e=e.join("."),d?APP.files.getItem(d)||(d+=(d.lastIndexOf("/")!==d.length-1?"/":"")+(f?f+".js":"")):d="js"===e?f+"."+e:b[f],d&&APP.require(d,f?function(){var b,c=APP.core.hasModule(f);return c?!e.length||/init|start/.test(e)?void APP.core.start(f):APP.core.applyMethod(f,e,a):(global[f]||"function"==typeof f&&(global[f]=f()),b=APP().namespace.grab(e,global.module),void("function"==typeof b&&b.apply(global.module,a)))}:void 0)},define:function(){var a=i.call(arguments),b=a[a.length-1];return"function"==typeof b&&(a[a.length-1]=b.bind(APP.box)),"function"==typeof l?l.apply(APP.box,a):void 0}}),window.define=APP.define}(APP),function(){"use strict";function a(a,b){switch(a){case"afterBegin":this.insertBefore(b,this.firstChild);break;case"beforeBegin":this.parentNode.insertBefore(b,this);break;case"afterEnd":this.parentNode.insertBefore(b,this.nextSibling);break;default:this.appendChild(b)}}var b=document.createElement("div");try{b.insertAdjacentHTML||Element.implement("insertAdjacentHTML",function(b,c){var d,e;d=document.createRange(),e=d.createContextualFragment(c),a.call(this,b,e)}),b.insertAdjacentElement||Element.implement("insertAdjacentElement",a),b.insertAdjacentText||Element.implement("insertAdjacentText",function(b,c){var d=document.createTextNode(c);a.call(this,b,d)})}catch(c){}}(),function(a,b){"use strict";function c(a){var b;if(!a||"string"!=typeof a)return"";switch(a=a.replace(/\?.*$/,""),b=/[^.]+$/i.exec(a)[0]){case"js":return"javascript";default:return"css"}}function d(a){for(var b=a.shift();b;)"function"==typeof b&&b(),b=a.shift()}function e(a){return a.loaded?void d(a.callbacks):void(e[a.type]&&e[a.type](a))}function f(b,c){var d=b.length,e=function(f){var g;f!==d&&(g=b[f],"object"==typeof g&&g.defined&&a[g.defined]||APP.require(g&&(g.src||g),function(){g.callback&&g.callback(),f+=1,e(f),f===d&&c&&c.call(APP())}))};return e}var g,h=Array.prototype.slice,i=[],j=b.head||b.getElementsByTagName("head")[0],k=location,l=k.origin||k.protocol+"//"+k.host,m=!1;i.setItem=function(a){var b,c=a.src.replace(l,"");return b=this.push(c),b-=1,a.index=b,this["_"+b]=a,b},i.getItem=function(a){var b;return a=a.replace(l,""),b=this.indexOf(a),-1!==b?this["_"+b]:void 0},e.javascript=function(a){var c;c=b.createElement("script"),c.async=!0,c[null===c.onreadystatechange?"onreadystatechange":"onload"]=function(){(!this.readyState||/loaded|complete/.test(this.readyState))&&(a.loaded=!0,d(a.callbacks))},c.onerror=function(){d(a.callbacks)},c.setAttribute("type","text/javascript"),c.setAttribute("src",a.src),j.appendChild(c)},e.css=function(a){var c=b.createElement("link");c.setAttribute("type","text/css"),c.setAttribute("rel","stylesheet"),c.setAttribute("href",a.src),i.lastCSS?i.lastCSS.parentNode.insertBefore(c,i.lastCSS.nextSibling):i.firstCSS?i.firstCSS=i.firstCSS.parentNode.insertBefore(c,i.firstCSS):j.appendChild(c),i.lastCSS=c,a.loaded=!0,d(a.callbacks)},g=function(){var a,b=h.call(arguments),d=b[0],g=b[1];return m||(APP.require.register(document.scripts||document.querySelectorAll("script")),APP.require.register(document.styleSheets||document.querySelectorAll("link")),m=!0),d?(APP.typeOf(g,"function")||(g=null),"string"==typeof d?(d=APP.files.getItem(d)||d,(a=i.getItem(d))?a.loaded?void(g&&g()):void(g&&a.callbacks.push(g)):(a={loaded:!1,src:d,origin:d.replace(l,""),callbacks:[],type:c(d)},g&&a.callbacks.push(g),i.setItem(a),void e(a))):void f(d,g)(0)):void 0},APP.require=g,APP.box.plugin("require",g),APP.require.register=function(a){function b(b){var c,d=b.length;if(d){for(c=0;d>c;c+=1)a((b[c].src||"stylesheet"===b[c].rel&&b[c].href||"").replace(/\?.*$/,""));/link/i.test(b[d-1])?(i.firstCSS=b[0],i.lastCSS=b[d-1]):(i.firstJS=b[0],i.lastJS=b[d-1])}}return b}(function(a){a&&"string"==typeof a&&i.setItem({loaded:!0,src:a,"static":!0,type:c(a)})}),window.DATAFILE=i}(window,window.document),function(a,b){"use strict";function c(){var a,b;if(!h&&(h=!0,i)){for(b=0,a=i.length;a>b;b+=1)i[b].call(window,[]);i=[]}}function d(){if(!h){try{b.documentElement.doScroll("left")}catch(e){return void a.setTimeout(d,1)}c()}}function e(){var e;if(!g){if(g=!0,"complete"===b.readyState)return c();if(b.addEventListener)b.addEventListener("DOMContentLoaded",f,!1),a.addEventListener("load",c,!1);else if(b.attachEvent){b.attachEvent("onreadystatechange",f),a.attachEvent("onload",c),e=!1;try{e=null===a.frameElement}catch(h){}b.documentElement.doScroll&&e&&d()}}}var f,g=!1,h=!1,i=[];f=b.addEventListener?function(){b.removeEventListener("DOMContentLoaded",f,!1),c()}:function(){"complete"===b.readyState&&(b.detachEvent("onreadystatechange",f),c())},APP.box.plugin("domready",function(b){e(),h?b.call(a,APP.box):i.push(function(){return b.call(a,APP.box)})}),APP.domready=APP.box.domready}(window,window.document),function(){"use strict";var a=[];APP.box.define({pKey:function(){return{translate:{},notImplemented:Object.create(Array.prototype),getItem:function(a,b){{var c,d,e=Array.prototype.slice.call(arguments);APP.getItem("isBetaTester")}if(0===e.length)return this.translate;if(2<e.length){switch(APP.typeOf(e[0])){case"object":c=e[0];break;case"string":c=APP.box.namespace.grab(e[0],this.translate)}a=e[1],b=e[2],d=c[a]}else d=this.translate[a];return void 0===d?(window.localStorage.getItem("logTranslations")&&log&&(this.notImplemented.contains(a)||(log("	<+> ",a,"	",b||""),this.notImplemented.push(a),this.notImplemented[a]=b||"brak wartosci klucza")),b||a):d},setItem:function(a,b){var c;{if("object"!=typeof a)return this.translate[a]=b,this;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&this.setItem(c,a[c])}}.setter(),create:function(a){var b=this.translate;return this.translate=Object.create(b),a&&this.setItem(a),this}}}()}),APP.augment({i18n:function(){return function(b,c,d){var e=this.i18n.url||"";"string"!=typeof b&&(b=(window.location.pathname||document.location.pathname).replace("/","").split("/")[0]),e+=b,APP.setItem("isBetaTester",!!c||"yes"===global.isBetaTester),a.contains(e)||(a.push(e),a.push(e.replace(/&groups=.*?(&|$)/,"")),function(a){var b=null===a.onload?"onload":"onreadystatechange";a[b]=function(){var a;if(4===this.readyState&&200===this.status){try{a=JSON.parse(this.responseText)}catch(b){return}if(a.error||!a.table)return;APP.box.pKey.setItem(a.table)}},a.open("GET",e,!!d),a.send()}(new XMLHttpRequest))}.assign({url:"/ajax_get_page_translations.html?short_name="})}()})}(),APP.getItem("pKey")||APP.setItem("pKey",APP().pKey),global.implementationRemoved=global.implementationRemoved||function(a){"use strict";var b;a=a||"Implementation removed. Remove the use of this function";try{throw global.Error("err")}catch(c){b=c.stack}log("!!! "+a+" !!!",b)},function(){"use strict";try{APP().domready(function(){document.documentElement.setAttribute("data-ats-loaded","html")}),global.addEventListener("load",function(){document.documentElement.setAttribute("data-ats-loaded","document")},!1)}catch(a){}}();